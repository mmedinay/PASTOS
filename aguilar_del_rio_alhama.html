<!DOCTYPE html>
<html>
<meta charset="utf-8" />
<head>
	<script src="leaflet\leaflet.js"></script>
	 <link rel="stylesheet" href="leaflet\leaflet.css"/>
	 <script type="text/javascript" src="https://raw.githubusercontent.com/mmedinay/PASTOS/master/aguilar_del_rio_alhama.js"></script>
	 <script src="leaflet-search-master\src\leaflet-search.js"></script>
	 <link rel="stylesheet" href="leaflet-search-master\src\leaflet-search.css" />
 
 <style>
  #map { 
	  width: 100%;
	  height: 600px;
	  box-shadow: 5px 5px 5px #888;
  }
 </style>
 
 </head>
  <body>
   <div id="map"></div>
 <script>
 
	var map = L.map('map', {
		center: [41.95, -1.98],
		zoom: 13
	});
	
	L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
}).addTo(map);		
 
	var countryStyle = {
		'color': "#858585",
		'weight': 2,
		'opacity': 0.6
	};
	
	function getColor(d) {
	return d > 100000000 ? '#800026' :
	d > 50000000 ? '#BD0026' :
	d > 20000000 ? '#E31A1C' :
	d > 10000000 ? '#FC4E2A' :
	d > 5000000 ? '#FD8D3C' :
	d > 2000000 ? '#FEB24C' :
	d > 1000000 ? '#FED976' :
	'#FFEDA0';
	}
	for(var i in aguilar_del_rio_alhama.features)
	aguilar_del_rio_alhama.features[i].properties.color = getColor( aguilar_del_rio_alhama.features[i].properties.pop_est );
	
	function popup(feature, layer) {
		if (feature.properties && feature.properties.poligono) {
			layer.bindPopup(feature.properties.poligono);
		}
	}
	
	function style(feature) {
		return { fillColor: getColor(feature.properties.pop_est),
		weight: 2,
		opacity: 1,
		color: 'white',
		dashArray: '3',
		fillOpacity: 0.7
		};
	}
		
	var aguilar_del_rio_alhamaJS = L.geoJson(aguilar_del_rio_alhama, {
			onEachFeature: popup,
			style: style
		}).addTo(map);
 
	var searchControl = new L.Control.Search({
		layer: aguilar_del_rio_alhamaJS, 
		propertyName: 'poligono',
		circleLocation: false
	});
 
	searchControl.on('search_locationfound', function(e) {
		e.layer.setStyle({fillColor: '#3f0', color: '#0f0'});
	})
	.on('search_collapsed', function(e) {
		aguilar_del_rio_alhamaJS.eachLayer(function(layer) { //restauramos el color del elemento
			aguilar_del_rio_alhamaJS.resetStyle(layer);
		});	
	});
	
	map.addControl(searchControl);
 
 </script>
 </body> 
 </html>